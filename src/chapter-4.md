# プログラムの作成

このようにスゴイ深層学習を、実際のプログラムで試してみたくなりませんか？　私は試してみたくなっちゃったので、今回は、ロボットに一般物体認識させるプログラムを作ってきました。せっかく作ってきたので、紹介させてください……。

## ソース・コード

ソース・コードは[GitHub](https://github.com/tail-island/jellyfish-eye/)で管理しています。[Git for Windows](https://git-for-windows.github.io/)をセットアップして、以下のコマンドでダウンロードしてください。

```bash
> cd TensorFlow  # 「2. インストール」で作成した、TensorFlow用の仮想環境
> git clone https://github.com/tail-island/jellyfish-eye.git
```

プロジェクト名のjellyfish-eyeは、一部のクラゲは高機能な目を持っていて、脳がないにもかかわらず目で見た情報を処理して活用しているらしいことに由来しています。脳を持たないロボットがセンサーの情報にもとづいて自律行動しちゃうぜって感じですね。

## Pythonのパッケージ

Pythonでは、ファイルがパッケージの単位になります。`./aaa.py`の中から`./bbb.py`に含まれる関数を使う際には、`import bbb`してあげなければならないわけですね。

今回は、あとでコードを活用できるように、複数のファイルに分割しました。その際に、管理が楽になるように専用のパッケージを作成しています。`./xxx/ccc.py`のようにして、`import xxx.ccc`にしたわけですな。

このパッケージ名（ディレクトリ名）は、Pythonの文法に合うようにプロジェクト名の`-`を`_`に置換して、`jellyfish_eye`としました。

```bash
> mkdir jellyfish_eye
```

## データ

私の手持ちのロボットはTurtleBotというロボットで、これには深度センサー（MicrosoftのKinectのような、ドット単位で、センサーから物体までの距離を計測できるもの）が付いています。

＊＊＊絵＊＊＊

この深度センサーのデータを深層学習で処理して、ロボットの前に置かれたものが何かを回答することにしましょう（本稿では紹介しませんけど、実は、指定した物体の前まで移動するロボット用のプログラムも書いています。ロボットがモノを見分けるように見えて気持ち悪いデモをご覧になりたい場合は、声をかけてください）。

ロボットの回答のレベルについても、考えなければなりません。というのも、「ギター」と回答するのか「平沢唯のギー太」と回答するのかで、難しさが変わってくるんですよ。「平沢唯のギー太」で学習して「平沢唯のギー太」を見つけるのは特定物体認識と呼ばれる技術で、実は簡単で面白くない。だから、「平沢唯のギー太」で学習して、学習データには含まれていなかった「中野梓のフェンダーJAPANのムスタング」についても「ギター」と答えてくれる、一般物体認識をやることにしましょう。

以上で方針が決まりましたので、学習用のデータを作成しました。ロボットの上でプログラムを動かして、縦100ドット×横100ドット×(3原色＋距離)のデータを、「カレンダー」と「飲み物」、「ティッシュ・ペーパー」の3種類分、集めてきました（会社の机の周りにあった、適当なもの3種類です）。

データを格納しているディレクトリーの構造は、以下の通り。

```
data
├── calendar
│   ├── DISNEY_カレンダー
│   ├── UNITED_BEES_カレンダー
│   └── software_AG_カレンダー
├── drink
│   ├── GEORGIA_EUROPIAN_香るブラック_400ml
│   ├── KIRIN_真っ赤なベリーのビタミーナ
│   ├── NATIONAL_VENDING_ホット
│   ├── POKKA_SAPPORO_冴えるBLACK_275g
│   ├── POKKA_SAPPORO_冴えるBLACK_400g
│   ├── POKKA_SAPPORO_富士山麓の天然水
│   └── SUNTORY_伊右衛門_1l
└── tissue-paper
    ├── FamilyMart_フェイシャルティシュー
    ├── Kleenex_HIGH_QUALITY_FACIAL_TISSUES
    ├── Kleenex_ハイクオリティ_フェイシャルティシュー
    ├── Kleenex_ローションティシュー_エックス
    └── エリエール_贅沢保湿
```

三階層目のディレクトリーの中に、それぞれの物体のデータが入ります。様々な角度から、1物体につき

データの単位で、ファイルは分割されています（ファイルの拡張子は.txt）。そのファイルの1行は1ドットを表していて「赤<空白>青＜空白＞緑＜空白＞距離」となっています（それぞれのデータの範囲は、0.0〜1.0）。最初の行は左上のドット、次の行はその右のドットと続き、最も右下のドットまで、10000行続いています。

## jellyfish_eye\/data_sets.py


